---
import PortalLayout from '../../../layouts/PortalLayout.astro'
import { EngagementDetail } from '../../../components/portal/EngagementDetail'
import { getEngagementById } from '../../../lib/portal-api'

export const prerender = false

const { engagementId } = Astro.params
const engagement = getEngagementById(engagementId || '')

if (!engagement) {
  return Astro.redirect('/portal/engagements/')
}
---

<PortalLayout title={`${engagement.title} — Espace Partenaire Semisto`} activePage="engagements">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <EngagementDetail
      client:load
      engagement={engagement}
      onBack={() => { window.location.href = '/portal/engagements/' }}
      onDocumentDownload={(id) => alert(`Téléchargement du document ${id} (mockup)`)}
    />
  </div>
</PortalLayout>
