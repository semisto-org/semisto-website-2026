---
import PortalLayout from '../../../layouts/PortalLayout.astro'
import { PackageDetail } from '../../../components/portal/PackageDetail'
import { getPackageById, getPackages } from '../../../lib/portal-api'

export const prerender = false

const { packageId } = Astro.params
const pkg = getPackageById(packageId || '')
const allPackages = getPackages()

if (!pkg) {
  return Astro.redirect('/portal/packages/')
}
---

<PortalLayout title={`${pkg.shortTitle} — Espace Partenaire Semisto`} activePage="packages">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <PackageDetail
      client:load
      pkg={pkg}
      allPackages={allPackages}
      onBack={() => { window.location.href = '/portal/packages/' }}
      onInterest={(id) => alert(`Intérêt marqué pour le package ${id} ! Semisto vous contactera bientôt.`)}
      onViewPackage={(id) => { window.location.href = `/portal/packages/${id}/` }}
    />
  </div>
</PortalLayout>
